<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gi·∫£i c·ª©u h·ªçc sinh kh·ªèi t·ªß l·∫°nh</title>
<style>
body { margin:0; font-family: Arial, sans-serif; text-align:center; overflow:hidden; }
#startScreen, #endScreen {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: url('assets/background.png') no-repeat center/cover;
}
#gameScreen { display:none; background: url('assets/background.png') no-repeat center/cover; width:100%; height:100vh; position:relative; }
#fridgeContainer { position:relative;transform: scale(1.2); width:500px; height:400px; margin:20px auto; background:url('assets/fridge.png') no-repeat center/cover; }
.student { width:60px; height:60px; position:absolute; bottom:150px; transition: all 0.5s ease; }
#heatFill { height:100%; width:0%; background-color:#00ff00; transition: width 0.3s, background-color 0.3s; }
#codes { margin:10px; font-size:18px; color:#fff; text-shadow:1px 1px #000; }
.question { margin:20px; font-size:20px; color:#fff; text-shadow:1px 1px #000; }
.answers button { margin:5px; padding:10px 20px; font-size:16px; cursor:pointer; }
.frozen { filter: brightness(50%) grayscale(80%) blur(1px); }
#snowflake { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1000; }
.snow { position:absolute; width:10px; height:10px; background:white; border-radius:50%; opacity:0.8; animation:fall linear infinite; }
@keyframes fall { 0% { transform: translateY(-10px); } 100% { transform: translateY(100vh); } }
@keyframes shake { 0% { transform: translateX(0px); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0px); } }
@keyframes jump { 0% { bottom:50px; } 50% { bottom:150px; } 100% { bottom:50px; } }
</style>
</head>
<body>

<!-- Start Screen -->
<div id="startScreen">
    <h1 style="  font-family: 'Arial', sans-serif;
    font-size: 50px;
    color: white; /* m√†u ch·ªØ b√™n trong */
    text-align: center;
    text-shadow:
        -2px -2px 0 #000,
        2px -2px 0 #000,
        -2px 2px 0 #000,
        2px 2px 0 #000; /* t·∫°o vi·ªÅn ƒëen xung quanh ch·ªØ */ ">Gi·∫£i c·ª©u th√∫ c∆∞ng kh·ªèi t·ªß l·∫°nh</h1>
    <div style="
        
        max-width:500px; 
        margin:20px auto; 
        padding:15px 20px; 
        background: rgba(0,0,0,0.4); /* n·ªÅn b√°n trong su·ªët */
        backdrop-filter: blur(5px); /* m·ªù n·ªÅn ph√≠a sau */
        border-radius:15px; 
        text-align:center; 
        color:white; 
        font-size:30px; 
        line-height:1.5;
        box-shadow: 0 0 10px rgba(0,0,0,0.5);
    ">
        ‚ùÑÔ∏è Gi√∫p th√∫ c∆∞ng b·ªã k·∫πt trong t·ªß l·∫°nh tho√°t ra!<br>
        ‚úÖ Ch·ªçn th√∫ c∆∞ng v√† tr·∫£ l·ªùi c√¢u h·ªèi ƒë√∫ng ƒë·ªÉ c·ª©u.<br>
        ‚ö†Ô∏è Tr·∫£ l·ªùi sai ‚Üí th√∫ c∆∞ng ƒë√≥ng bƒÉng v√† tuy·∫øt r∆°i nhi·ªÅu h∆°n.<br>
        üéØ C·ª©u c√†ng nhi·ªÅu th√∫ c∆∞ng c√†ng t·ªët,Try your best !
    </div>
    <button onclick="startGame()" style="
    padding: 15px 40px;
    font-size: 20px;
    font-weight: bold;
    color: white;
    background: linear-gradient(45deg, #00c6ff, #0072ff);
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    ">B·∫Øt ƒë·∫ßu</button>
    
</div>
<!-- Ice Overlay -->
<div id="iceOverlay" style="
    position:absolute;
    top:0; left:0;
    width:80px; height:100%;
    pointer-events:none;
    background:url('assets/ice.png') no-repeat right/cover;
    z-index:50;
    opacity:0.8;
    filter: blur(2px);
    transition: width 1s linear;
"></div>
<!-- Game Screen -->
<div id="gameScreen">
    <div id="fridgeContainer">
        <img src="assets/dog.png" id="student1" class="student" style="left:103px;">
        <img src="assets/mouse.png" id="student2" class="student" style="left:162px;">
        <img src="assets/birt.png" id="student3" class="student" style="left:224px;">
        <img src="assets/cat.png" id="student4" class="student" style="left:283px;">
        <img src="assets/rabit.png" id="student5" class="student" style="left:337px;">
    </div>
    <div id="heatBar"><div id="heatFill"></div></div>
    <div class="question" id="question" style="
    max-width:500px; 
        margin:20px auto; 
        padding:10px 15px; 
        background: rgba(0,0,0,0.4); /* n·ªÅn b√°n trong su·ªët */
        backdrop-filter: blur(5px); /* m·ªù n·ªÅn ph√≠a sau */
        border-radius:15px; 
        text-align:center; 
        color:white; 
        font-size:20px; 
        line-height:1.5;
        box-shadow: 0 0 10px rgba(0,0,0,0.5);
"> </div>
    <div class="answers" id="answers" style="font-size:18px;"></div>
    <div id="timer"style="
    max-width:80px; 
        margin:20px auto; 
        padding:10px 15px; 
        background: rgba(0,0,0,0.4); /* n·ªÅn b√°n trong su·ªët */
        backdrop-filter: blur(5px); /* m·ªù n·ªÅn ph√≠a sau */
        border-radius:15px; 
        text-align:center; 
        color:white; 
        font-size:20px; 
        line-height:1.5;
        box-shadow: 0 0 10px rgba(0,0,0,0.5);
"> <span id="time">15</span>s</div>
</div>

<!-- Snow effect -->
<div id="snowflake"></div>

<!-- End Screen -->
<div id="endScreen" style="display:none;">
    <h1 id="endMessage"></h1>
    <button onclick="location.reload()"style="
    padding: 15px 40px;
    font-size: 20px;
    font-weight: bold;
    color: white;
    background: linear-gradient(45deg, #00c6ff, #0072ff);
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    ">Ch∆°i l·∫°i</button>
</div>

<!-- Sounds -->
<audio id="tick" src="assets/tick.mp3"></audio>
<audio id="success" src="assets/success.mp3"></audio>
<audio id="fail" src="assets/fail.mp3"></audio>
<audio id="openDoor" src="assets/openDoor.mp3"></audio>
<audio id="bgm" src="assets/bgm.mp3" loop></audio>
<audio id="winSound" src="assets/win.mp3"></audio>
<audio id="loseSound" src="assets/lose.mp3"></audio>
<script>
// ----------------------------
// D·ªÆ LI·ªÜU C√ÇU H·ªéI
// ----------------------------
const questions = [
    {q:"T√°c d·ª•ng ch√≠nh c·ªßa t·ªß l·∫°nh trong gia ƒë√¨nh l√† g√¨?", 
     a:["L√†m n√≥ng th·ª±c ph·∫©m tr∆∞·ªõc khi ƒÉn",
        "B·∫£o qu·∫£n th·ª±c ph·∫©m ƒë∆∞·ª£c l√¢u v√† √≠t m·∫•t ch·∫•t dinh d∆∞·ª°ng",
        "L√†m kh√¥ th·ª±c ph·∫©m nhanh h∆°n",
        "D√πng ƒë·ªÉ tr∆∞ng b√†y th·ª±c ph·∫©m"], correct:1},

    {q:"Th·ª±c ph·∫©m t∆∞∆°i s·ªëng nh∆∞ th·ªãt, c√° mu·ªën b·∫£o qu·∫£n d√†i ng√†y n√™n ƒë·ªÉ ·ªü khoang n√†o?", 
     a:["Khoang l√†m l·∫°nh", "NgƒÉn ƒë·ª±ng rau", "Khoang c·∫•p ƒë√¥ng", "C√°nh t·ªß l·∫°nh"], correct:2},

    {q:"Bi·ªÉu hi·ªán n√†o sau ƒë√¢y cho th·∫•y t·ªß l·∫°nh ƒëang g·∫∑p v·∫•n ƒë·ªÅ b·∫•t th∆∞·ªùng?", 
     a:["T·ªß l·∫°nh l√†m l·∫°nh b√¨nh th∆∞·ªùng", 
        "B√™n trong t·ªß s√°ng ƒë√®n khi m·ªü",
        "T·ªß ph√°t ra ti·∫øng k√™u l·∫° v√† rung m·∫°nh",
        "Kh√¥ng gian trong t·ªß tho√°ng v√† s·∫°ch"], correct:2},

    {q:"Trong c√°c l·ª±a ch·ªçn sau, vi·ªác n√†o kh√¥ng n√™n l√†m khi s·ª≠ d·ª•ng t·ªß l·∫°nh?", 
     a:["ƒê·ªÉ t·ªß l·∫°nh g·∫ßn b·∫øp gas", 
        "ƒê·∫≠y k√≠n th·ª©c ƒÉn tr∆∞·ªõc khi cho v√†o t·ªß", 
        "S·∫Øp x·∫øp th·ª±c ph·∫©m g·ªçn g√†ng", 
        "Ki·ªÉm tra v√† lo·∫°i b·ªè ƒë·ªì h·ªèng ƒë·ªãnh k·ª≥"], correct:0},

    {q:"L√≠ do v√¨ sao kh√¥ng n√™n ƒë·ªÉ t·ªß l·∫°nh qu√° ƒë·∫ßy th·ª±c ph·∫©m?", 
     a:["L√†m t·ªß l·∫°nh ch·∫°y √™m h∆°n", 
        "Gi√∫p ti·∫øt ki·ªám ƒëi·ªán nƒÉng", 
        "L√†m kh√¥ng kh√≠ l·∫°nh kh√≥ l∆∞u th√¥ng, gi·∫£m hi·ªáu qu·∫£ l√†m l·∫°nh", 
        "L√†m ƒë√° nhanh h∆°n"], correct:2}
];

// ----------------------------
// BI·∫æN H·ªÜ TH·ªêNG
// ----------------------------
const students = document.querySelectorAll('.student');
const qBox = document.getElementById('question');
const ansBox = document.getElementById('answers');
let savedCount = 0;
let frozenCount = 0;

let currentStudent = null;
let selectedAnswer = null;
let timer;
let timeLeft = 15;
let snowInterval;

// ----------------------------
// START GAME
// ----------------------------
function startGame() {
    document.getElementById("startScreen").style.display = "none";
    document.getElementById("gameScreen").style.display = "block";
    document.getElementById("bgm").play();
}

// ----------------------------
// CH·ªåN STUDENT
// ----------------------------
students.forEach((stu, index) => {
    stu.dataset.state = "alive";
    stu.addEventListener("click", () => {
        if (stu.dataset.state !== "alive") return;
        currentStudent = index;
        showQuestion(index);
    });
});

// ----------------------------
// HI·ªÜN C√ÇU H·ªéI
// ----------------------------
function showQuestion(i) {
    currentStudent = i;
    selectedAnswer = null;
    const q = questions[i];
    qBox.innerText = q.q;
    ansBox.innerHTML = "";

    q.a.forEach((ans, idx) => {
        let btn = document.createElement("button");
        btn.innerText = ans;
        btn.style.transition = "all 0.3s ease";
        btn.style.border = "2px solid transparent";
        btn.style.backgroundColor = "#fff";
        btn.style.color = "#000";
        btn.onclick = () => selectAnswer(idx, btn);
        ansBox.appendChild(btn);
    });

    qBox.style.display = "block";
    ansBox.style.display = "block";

    startTimerForStudent();
}

// ----------------------------
// CH·ªåN ƒê√ÅP √ÅN (B√¥i ƒë·∫≠m vi·ªÅn)
function selectAnswer(idx, btn) {
    if (selectedAnswer !== null) return;
    selectedAnswer = idx;

    const buttons = ansBox.querySelectorAll("button");
    buttons.forEach(b => b.style.border = "2px solid transparent");

    btn.style.border = "3px solid yellow";
    btn.style.fontWeight = "bold";
}

// ----------------------------
// TIMER CHO C√ÇU H·ªéI
// ----------------------------
function startTimerForStudent() {
    clearInterval(timer);
    timeLeft = 15;
    document.getElementById('time').innerText = timeLeft;

    timer = setInterval(() => {
        timeLeft--;
        document.getElementById('time').innerText = timeLeft;

        if (timeLeft <= 0) {
            clearInterval(timer);
            revealAnswer();
        }
    }, 1000);
}

// ----------------------------
// HI·ªÜN K·∫æT QU·∫¢ SAU 10s HO·∫∂C CH·ªåN
// ----------------------------
function revealAnswer() {
    const q = questions[currentStudent];
    const buttons = ansBox.querySelectorAll("button");

    buttons.forEach((btn, idx) => {
        btn.disabled = true;
        if (idx === q.correct) {
            btn.style.backgroundColor = "green";
            btn.style.color = "white";
            btn.style.fontWeight = "bold";
        } else if (selectedAnswer === idx && selectedAnswer !== q.correct) {
            btn.style.backgroundColor = "red";
            btn.style.color = "white";
            btn.style.fontWeight = "bold";
        }
    });

    // hi·ªáu ·ª©ng h·ªçc sinh
    if (selectedAnswer === q.correct) {
        saveStudent(currentStudent);
        document.getElementById('success').play();
    } else {
        freezeStudent(currentStudent);
        document.getElementById('fail').play();
    }

    currentStudent = null;
    selectedAnswer = null;
    checkGameEnd();
}

// ----------------------------
// JUMP STUDENT
// ----------------------------
function saveStudent(i) {
    let st = students[i];
    st.dataset.state = "saved";
    savedCount++;

    st.style.animation = "jump 0.6s ease";
    setTimeout(() => st.style.bottom = "400px", 500);
    setTimeout(() => st.style.display = "none", 900);
    checkGameEnd();
}

// ----------------------------
// FREEZE STUDENT
// ----------------------------
function freezeStudent(i) {
    let st = students[i];
    st.dataset.state = "frozen";
    frozenCount++;

    st.classList.add("frozen");

    const ice = document.createElement("div");
    ice.style.position = "absolute";
    ice.style.top = st.offsetTop + "px";
    ice.style.left = st.offsetLeft + "px";
    ice.style.width = "78px";
    ice.style.height = st.offsetHeight + "px";
    ice.style.background = "url('assets/ice.png') center/cover no-repeat";
    ice.style.opacity = "1";
    ice.style.zIndex = "100";
    document.getElementById("fridgeContainer").appendChild(ice);

    if (!snowInterval) startSnow();
    checkGameEnd(); // g·ªçi ·ªü ƒë√¢y
}
// ----------------------------
// KI·ªÇM TRA K·∫æT TH√öC GAME
// ----------------------------
function checkGameEnd() {
    // N·∫øu t·ªïng s·ªë h·ªçc sinh ƒë√£ c·ª©u + ƒë√£ ƒë√≥ng bƒÉng = t·ªïng s·ªë h·ªçc sinh
    if (savedCount + frozenCount === students.length) {
        endGame(savedCount);
    }
}

// ----------------------------
// END GAME
// ----------------------------
function endGame(saved) {
    document.getElementById('gameScreen').style.display = "none";
    document.getElementById('endScreen').style.display = "flex";

    const msg = document.getElementById('endMessage');
    let content = "";

    if (saved === students.length) {
        content = `üéâ Ch√∫c m·ª´ng b·∫°n ƒë√£ c·ª©u ƒë∆∞·ª£c t·∫•t c·∫£ h·ªçc sinh!`;
        document.getElementById('winSound').play();
    } else {
        content = `‚ùÑÔ∏è B·∫°n ƒë√£ c·ª©u ƒë∆∞·ª£c ${saved} h·ªçc sinh.`;
        document.getElementById('loseSound').play();
    }

    msg.innerHTML = `
        <div style="
            max-width:500px; 
            margin:20px auto; 
            padding:15px 20px; 
            background: rgba(0,0,0,0.4); 
            backdrop-filter: blur(5px); 
            border-radius:15px; 
            text-align:center; 
            color:white; 
            font-size:16px; 
            line-height:1.5;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        ">
            ${content}
        </div>
    `;
}

// ----------------------------
// HI·ªÜU ·ª®NG TUY·∫æT
// ----------------------------
function startSnow() {
    const snowflake = document.getElementById('snowflake');
    snowInterval = setInterval(() => {
        const snow = document.createElement('div');
        snow.classList.add('snow');
        snow.style.left = Math.random() * 100 + '%';
        snow.style.animationDuration = (2 + Math.random() * 3) + 's';
        snowflake.appendChild(snow);
        setTimeout(() => snow.remove(), 5000);
    }, 200);
}


</script>




</body>
</html>
